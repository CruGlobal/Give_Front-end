<!-- The primary header -->


<header id="desktop-navigation" class="gh-desk-nav">

    <div class="container">

      <a href="" title="Cru" class="gh-desk-logo"></a>

      <ul class="gh-desk-nav-tree col-level-1">
            <li class="has-children" data-promo-img="" data-promo-link="">
                <a href="">Train and Grow</a>

                <ul class="col-level-2 off">
                    <li class="has-children" data-promoimg="" data-promolink="">
                        <a href="">Level 2 a</a>
                        <ul class="col-level-3 ">
                            <li><a href="">Level 3 a</a></li>
                            <li><a href="">Level 3 a</a></li>
                        </ul>
                    </li>
                    <li class="has-children">
                        <a href="">Level 2 b</a>
                        <ul class="col-level-3">
                            <li><a href="">Level 3 b</a></li>
                            <li><a href="">Level 3 b</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="">Level 2 b</a>
                    </li>
                </ul>

                <div class="gh-desk-promo ">
                    Promo Bucket
                </div>
            </li>
        </ul>

      <div class="search-icon"></div>

      <div class="search">
        <div class="container">
          <form action="" id="desktop-search">
            <input type="text" placeholder="search">
          </form>
        </div>
      </div>
    </div>

</header>


<script>
  $(function () {
    var level1WithChildren = $(".col-level-1 > li.has-children");
    var level2WithChildren = $('.col-level-2 li.has-children');
    var level2NoChildren = $('.col-level-2 > li').not('.has-children');

    var searchBox = $(".search");
    var searchIcon = $(".search-icon");

    level1WithChildren.mouseenter(function () {
      console.log('enter');
    });

    level1WithChildren.mouseleave(function () {
      console.log('exit');
    });

    level2WithChildren.mouseenter(function () {
          $("> a", this).next().addClass('on');
          $('.gh-desk-promo').addClass('gh-offset-2');
      });

    level2NoChildren.mouseenter(function () {
          $("> a", this).next().removeClass('on');
          $('.gh-desk-promo').removeClass('gh-offset-2');
      });

    level2WithChildren.mouseleave(function () {
          $("> a", this).next().removeClass('on');
          $('.gh-desk-promo').removeClass('gh-offset-2');
      });

    searchIcon.click(function () {
      searchBox.toggleClass("open");
      if (searchBox.hasClass("open")) {
        this.style.backgroundImage = "url('/assets/img/desktop-search-close.png')"
      } else {
        this.style.backgroundImage = "url('/assets/img/desktop-search.png')"
      }
    });

    $(".search input").click(function () {
      $(this).addClass("black-text");
    });

    $("form#desktop-search").submit(function (e) {
      e.preventDefault();

      var query = $(this).find("input").val();
      window.location.href ="https://give.cru.org/give/VirtualCommonLinks/process/search2?Query=" + query;
    })
  });
</script>
<!-- End primary header -->